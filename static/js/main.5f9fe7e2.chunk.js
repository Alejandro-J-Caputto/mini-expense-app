(this["webpackJsonpmini-expense-app"]=this["webpackJsonpmini-expense-app"]||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n.n(a),s=n(2),l=n(1),i=Object(l.createContext)(null),r=n(0),o=function(e){var t=e.date,n=new Date(t),a=n.toLocaleString("de-CH",{month:"long"}),c=n.toLocaleString("de-CH",{day:"2-digit"}),s=n.toLocaleString("de-CH",{year:"numeric"});return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"expense-item__date",children:[Object(r.jsxs)("div",{className:"expense-item__date--month",children:[a,", "]}),Object(r.jsx)("div",{className:"expense-item__date--day",children:c}),Object(r.jsx)("div",{className:"expense-item__date--year",children:s})]})})},u=function(e){var t=e.date,n=e.expense,a=e.price;e.dispatchExpense;return Object(r.jsxs)("div",{onClick:function(e){console.log("me clicke desde el item")},className:"expense-item",children:[Object(r.jsx)(o,{date:t}),Object(r.jsx)("div",{className:"expense-item__description",children:Object(r.jsx)("h2",{children:n})}),Object(r.jsx)("div",{className:"expense-item__price",children:a})]})},d=function(e){var t=e.children,n=e.className,a=(e.dispatchExpense,n);return Object(r.jsx)("div",{onClick:function(e){return function(e){var t=e.target.closest(".expense-item");console.log(t)}(e)},className:a,children:t})},j=n(10),x=function e(t,n,a){Object(j.a)(this,e),this.date=t,this.expense=n,this.price=a,this.id=void 0,this.date=new Date(t),this.expense=n,this.price=a,this.id=(new Date).getMilliseconds()},p=n(5),b=n(8),m=function(e){var t=e.onSubmittedExpense,n=function(e){var t=Object(l.useState)(e),n=Object(s.a)(t,2),a=n[0],c=n[1];return{formValues:a,handleInputChange:function(e){var t=e.target,n=t.name,a=t.value;c((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(p.a)({},n,a))}))},reset:function(){c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:e)},customValidator:function(e){var t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"===typeof e.value&&(t=t&&e.value.length>e.minLength),null!=e.maxLength&&"string"===typeof e.value&&(t=t&&e.value.length<e.maxLength),null!=e.min&&"number"===typeof e.value&&(t=t&&e.value>e.min),null!=e.max&&"number"===typeof e.value&&(t=t&&e.value<e.max),t}}}({expense:"",date:new Date,price:.1}),a=n.formValues,c=n.handleInputChange,i=n.reset,o=n.customValidator,u=a.expense,d=a.date,j=a.price,m=Object(l.useState)(!0),h=Object(s.a)(m,2),v=h[0],O=h[1],f=Object(r.jsx)("div",{className:"expense-form__action expense-form__action--menu",children:Object(r.jsx)("button",{onClick:function(){return O(!1)},className:"btn btn--expense-form btn--expense--menu",children:" Add Expense "})}),g={value:u,required:!0,minLength:3},N={value:j,required:!0,min:.1},_={value:d,required:!0};return Object(r.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),console.log("me submit\xe9 patata"),!o(g)||!o(N)||!o(_))return alert("Field no valido");var n=new x(new Date(d),u,j);t(n),i()},className:"expense-form",children:v?f:Object(r.jsxs)("div",{className:"expense-form__controls",children:[Object(r.jsxs)("div",{className:"expense-form__control",children:[Object(r.jsx)("label",{htmlFor:"expense",children:"Title"}),Object(r.jsx)("input",{name:"expense",value:u,onChange:c,placeholder:"Expense",id:"expense",type:"text"})]}),Object(r.jsxs)("div",{className:"expense-form__control",children:[Object(r.jsx)("label",{htmlFor:"price",children:"Amount"}),Object(r.jsx)("input",{id:"price",value:j,name:"price",onChange:c,placeholder:"Amount",type:"number",min:"0.01",step:"0.01"})]}),Object(r.jsxs)("div",{className:"expense-form__control",children:[Object(r.jsx)("label",{htmlFor:"date",children:"Date"}),Object(r.jsx)("input",{id:"date",value:"string"!==typeof d?"".concat(d.getFullYear(),"-").concat(d.toLocaleString("de-CH",{month:"2-digit"}),"-").concat(d.toLocaleString("de-CH",{day:"2-digit"})):d,name:"date",onChange:c,type:"date",min:"2019-01-01",max:"2022-12-31"})]}),Object(r.jsxs)("div",{className:"expense-form__action",children:[Object(r.jsx)("button",{className:"btn btn--expense-form",type:"submit",children:" Add "}),Object(r.jsx)("button",{onClick:function(){return O(!0)},className:"btn btn--expense-form btn--expense-form--cancel",children:" Cancel "})]})]})})},h=function(){var e=Object(l.useContext)(i).dispatchExpense;return Object(r.jsx)("div",{className:"newExpense",children:Object(r.jsx)(m,{onSubmittedExpense:function(t){var n=function(e,t){return"addExpense"===e?{type:e,payload:t}:void 0}("addExpense",t);e(n)}})})},v=function(e){var t=e.onSetYear,n=e.filterYear;return Object(r.jsx)("div",{className:"expense-filter",children:Object(r.jsxs)("div",{className:"expense-filter__control",children:[Object(r.jsx)("label",{children:"Filter By Year"}),Object(r.jsxs)("select",{value:n,onChange:function(e){return t(e.target.value)},children:[Object(r.jsx)("option",{value:"2022",children:"2022"}),Object(r.jsx)("option",{value:"2021",children:"2021"}),Object(r.jsx)("option",{value:"2020",children:"2020"}),Object(r.jsx)("option",{value:"2019",children:"2019"})]})]})})},O=n(11),f=n(6),g=function(e){var t=e.value,n=e.label,a=e.maxValue,c="0%";return a>0&&(c=Math.round(t/a*100)+"%"),Object(r.jsxs)("div",{className:"chart-bar",children:[Object(r.jsx)("div",{className:"chart-bar__content",children:Object(r.jsx)("div",{style:{height:c},className:"chart-bar__fill"})}),Object(r.jsx)("div",{className:"chart-bar__label",children:n})]})},N=function(e){var t=e.dataGraphicPoints,n=t.map((function(e){return e.value})),a=Math.max.apply(Math,Object(f.a)(n));return Object(r.jsx)("div",{className:"chart-container",children:t.map((function(e){return Object(r.jsx)(g,{value:e.value,maxValue:a,label:e.label},e.label)}))})},_=function(e){var t,n=e.filteredExpenseResults,a=[{label:"Jan",value:0},{label:"Feb",value:0},{label:"Mar",value:0},{label:"Apr",value:0},{label:"May",value:0},{label:"Jul",value:0},{label:"Aug",value:0},{label:"Sep",value:0},{label:"Oct",value:0},{label:"Nov",value:0},{label:"Dec",value:0}],c=Object(O.a)(n);try{for(c.s();!(t=c.n()).done;){var s=t.value;a[new Date(s.date).getMonth()].value+=Number(s.price)}}catch(l){c.e(l)}finally{c.f()}return Object(r.jsx)(N,{dataGraphicPoints:a})},y=function(){var e=Object(l.useContext)(i),t=e.expenseResults,n=e.dispatchExpense,a=Object(l.useState)("2021"),c=Object(s.a)(a,2),o=c[0],j=c[1];Object(l.useEffect)((function(){localStorage.setItem("expenses",JSON.stringify(t))}),[t]);var x=t.filter((function(e){return new Date(e.date).getFullYear()===+o})),p=Object(r.jsx)("div",{className:"message-filter",children:Object(r.jsx)("p",{className:"message-filter__notFound",children:" No expenses registered "})});return x.length>0&&(p=x.map((function(e){var t=e.id,a=e.expense,c=e.price,s=e.date;return Object(r.jsx)(u,{dispatchExpense:n,expense:a,price:c,date:s},t)}))),Object(r.jsx)("div",{className:"main",children:Object(r.jsxs)(d,{className:"container",children:[Object(r.jsx)(v,{filterYear:o,onSetYear:function(e){j(e)}}),Object(r.jsx)(_,{filteredExpenseResults:x}),Object(r.jsx)(h,{}),p]})})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"addExpense":e=[a].concat(Object(f.a)(e));break;default:return e}return e},C=function(){return{expensesAPI:[]}},E=function(){var e=Object(l.useReducer)(S,[],(function(){return JSON.parse(localStorage.getItem("expenses"))||[]})),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.jsx)("div",{children:Object(r.jsx)(i.Provider,{value:{expenseResults:n,dispatchExpense:a,useExpenseService:C},children:Object(r.jsx)(y,{})})})};n(17);c.a.render(Object(r.jsx)(E,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.5f9fe7e2.chunk.js.map